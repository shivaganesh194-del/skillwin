var options = {
  key: "rzp_test_S5ix2RrfFFJITe",
  amount: 1000, // â‚¹10
  currency: "INR",
  name: "SkillWin",
  description: "Skill Contest Entry",

  method: {
    upi: true,
    card: false,
    netbanking: false,
    wallet: false,
    paylater: false
  },

  handler: async function (response) {
    const phone = document.getElementById("phone").value;

    const res = await fetch("/api/create-order", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        phone: phone,
        payment_id: response.razorpay_payment_id
      }),
    });

    const data = await res.json();

    document.getElementById("ticketBox").innerHTML = `
      <h3>ðŸŽŸ Your Ticket</h3>
      <b>${data.ticketNumber}</b>
      <p>Winners will be notified shortly</p>

      <a href="https://wa.me/?text=I just joined SkillWin and got ticket ${data.ticketNumber}. Join now for â‚¹10 ðŸ‘‰ ${window.location.href}"
         target="_blank"
         style="display:block;margin-top:12px;color:#25D366;font-weight:bold;">
        ðŸ“¢ Share on WhatsApp & Get 1 Extra Ticket
      </a>
    `;
  }
};
async function shareReferral() {
  const userId = localStorage.getItem("user_id");
  const phone = localStorage.getItem("phone");

  const link = `${window.location.origin}?ref=${userId}`;

  const text = `I joined SkillWin ðŸŽ‰  
Answer & Win â‚¹5 Lakhs!  
Join using my link ðŸ‘‰ ${link}`;

  window.open(
    `https://wa.me/?text=${encodeURIComponent(text)}`,
    "_blank"
  );
}
